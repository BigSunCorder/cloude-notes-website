"use strict";(self["webpackChunkvue_evernote_client"]=self["webpackChunkvue_evernote_client"]||[]).push([[806],{9806:function(e,s,i){i.r(s),i.d(s,{default:function(){return c}});var r=function(){var e=this,s=e.$createElement,i=e._self._c||s;return i("div",{attrs:{id:"login"}},[i("div",{staticClass:"models"},[i("div",{staticClass:"models__wrapper"},[i("div",{staticClass:"models__wrapper__container"},[i("div",{staticClass:"main"}),i("div",{staticClass:"form"},[i("h3",{on:{click:e.showRegister}},[e._v("创建账户")]),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowRegister,expression:"isShowRegister"}],staticClass:"register"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.register.username,expression:"register.username"}],attrs:{type:"text",placeholder:"用户名"},domProps:{value:e.register.username},on:{input:function(s){s.target.composing||e.$set(e.register,"username",s.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.register.password,expression:"register.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.register.password},on:{input:function(s){s.target.composing||e.$set(e.register,"password",s.target.value)}}}),i("p",{class:{error:e.register.isError}},[e._v(" "+e._s(e.register.notice)+" ")]),i("div",{staticClass:"button",on:{click:e.onRegister}},[e._v("创建账号")])])]),i("h3",{on:{click:e.showLogin}},[e._v("登录")]),i("transition",{attrs:{name:"fade"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowLogin,expression:"isShowLogin"}],staticClass:"login"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.login.username,expression:"login.username"}],attrs:{type:"text",placeholder:"输入用户名"},domProps:{value:e.login.username},on:{input:function(s){s.target.composing||e.$set(e.login,"username",s.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:e.login.password,expression:"login.password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:e.login.password},on:{input:function(s){s.target.composing||e.$set(e.login,"password",s.target.value)}}}),i("p",{class:{error:e.login.isError}},[e._v(e._s(e.login.notice))]),i("div",{staticClass:"button",on:{click:e.onLogin}},[e._v("登录")])])])],1)])])])])},t=[],o=(i(3219),i(5322)),n=(i(1343),i(4665));o.Z.getInfo().then((e=>{console.log(e)}));var a={name:"Login",data(){return{isShowLogin:!0,isShowRegister:!1,login:{username:"sunrui",password:"123456",notice:"请输入用户名和密码",isError:!1},register:{username:"sunrui",password:"123456",notice:"创建账号号请输入用户名和密码",isError:!1}}},methods:{...(0,n.nv)({loginUser:"login",registerUser:"register"}),showRegister(){this.isShowRegister=!0,this.isShowLogin=!1},showLogin(){this.isShowRegister=!1,this.isShowLogin=!0},onRegister(){console.log("register");let e=this.validUsername(this.register.username);if(!e.isValid)return this.register.isError=!0,void(this.register.notice=e.notice);let s=this.validPassword(this.register.password);if(!s.isValid)return this.register.isError=!0,void(this.register.notice=s.notice);console.log(`注册成功,用户名是${this.register.username},密码是${this.register.password}`),this.registerUser({username:this.register.username,password:this.register.password}).then((()=>{this.register.isError=!1,this.register.notice="",console.log(data)})).catch((e=>{this.register.isError=!0,this.register.notice=e.msg,console.log(e)}))},onLogin(){console.log("login");let e=this.validUsername(this.login.username);if(!e.isValid)return this.login.isError=!0,void(this.login.notice=e.notice);let s=this.validPassword(this.login.password);if(!s.isValid)return this.login.isError=!0,void(this.login.notice=s.notice);console.log(`登录成功,用户名是${this.register.username},密码是${this.register.password}`),this.loginUser({username:this.login.username,password:this.login.password}).then((()=>{this.login.isError=!1,this.login.notice="",this.$router.push({path:"/notebooks"}),console.log("start redirect...")})).catch((e=>{this.login.isError=!0,this.login.notice=e.msg,console.log(e)}))},validUsername(e){return{isValid:/^[\w\u4e00-\u9fa5]{3,15}$/.test(e),notice:"用户名必须是3-15个字符，仅限数组字母下划线"}},validPassword(e){return{isValid:/^.{6,16}$/.test(e),notice:"密码长度为6-16位字符"}}}},l=a,g=i(1001),d=(0,g.Z)(l,r,t,!1,null,"2e852afb",null),c=d.exports},1343:function(e,s,i){var r=i(8935);new r["default"]}}]);
//# sourceMappingURL=806.fca40c6c.js.map